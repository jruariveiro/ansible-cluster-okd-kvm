---
# Exigir que a tecnologia de virtualização (VT) seja habilitada para executar este papel. 
# Embora isso forneça melhor desempenho da VM, talvez ela não esteja disponível em determinados ambientes.
kvm_host_require_vt: true

# Configuro como true pois utilizo o cockpit para gerir docker e outras ferramentas
kvm_host_require_cockpit: true

# --------------------------------------------------------------------------------------------------------
# Configurações para a VM base para o projeto
# --------------------------------------------------------------------------------------------------------

# recriar a vm base caso exista.
vm_base_recreate: True

vm_base_timezone: 'America/Sao_Paulo'

# configuração da rede que será utilizada no projeto okd
vm_base_network:
  name: 'okd'
  type: 'dnsmasq'
  domain: 'example.com'
  bridge: 'virbr1'
  addresses: [ '192.168.200.1/24' ]
  forward: True
  dhcp_range: [ '2', '-2' ]
  dhcp: True

# configurações da vm-base a ser criada
vm_base_machine: 
  name: 'vm-base'
  hostname: 'base'
  description: 'Template para clone das VMs do OKD'
  state: present
  memory_mb: 2048
  vcpus: 2
  autostart: true
  pool:
    name: 'vm-base'
    type: 'dir'
    path: '/workspace/kvm'
    owner: 'mbarbosa'
    group: 'mbarbosa'    
  volumes:
    - name: 'disk-root'
      device: 'disk'
      format: 'qcow2'
      capacity: '20G'
    - name: 'boot'
      device: 'cdrom'
      format: 'raw'
  interfaces:
    - network: 'okd'

# --------------------------------------------------------------------------------------------------------
# Configurações para as VMs do cluster OKD
# --------------------------------------------------------------------------------------------------------

# recriar todo o cluster okd
okd_recreate: True

# prefix no nome das vms
okd_prefix: 'okd'

# configurações para vms load balancer
vm_lbs:
  prefix: 'lb'
  vcpus: '2'
  memory: '2G'
  vms: 1

# configurações para vms masters
vm_masters:
  prefix: 'master'
  vcpus: '2'
  memory: '2G'
  vms: 2

# configurações para vms infras
vm_infras:
  prefix: 'infra'
  vcpus: '4'
  memory: '4G'
  vms: 2

# configurações para vms apps
vm_apps:
  prefix: 'app'
  vcpus: '4'
  memory: '4G'
  vms: 2
